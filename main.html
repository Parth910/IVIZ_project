<!DOCTYPE html>
<html lang="en">
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" />
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
<!-- MDB -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.0.0/mdb.min.css" rel="stylesheet" />
<!-- MDB -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.0.0/mdb.min.js"></script>
<style>
    body {
        font-family: "Lato", sans-serif
    }

    .mySlides {
        display: none
    }
</style>

<body>
    <header>


        <!-- Jumbotron -->
        <div class="p-5 text-center bg-light">
            <h1 class="mb-3">Datavisualization</h1>
            <h4 class="mb-3">Project</h4>
           
           
           
            <a class="btn btn-primary" href="" role="button">Top states Bar charts</a>
            <a class="btn btn-primary" href="" role="button">Bottom States Bar Chart</a>
        
        <!-- Jumbotron -->
        <div class="container bg-light">
            <div class="row justify-content-evenly m-5">
                <div class="col-4">
                    <div class="card">
                        <div class="card-header">About Data</div>
                        <div class="card-body">
                            <h5 class="card-title">Special title treatment</h5>
                            <p class="card-text">
                                With supporting text below as a natural lead-in to additional content.
                            </p>
                            <a href="#" class="btn btn-primary">Link to Database</a>
                            <a href="#" class="btn btn-primary">Github Repo</a>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="card">

                        <svg viewBox="-5 0 300 200" id="svg" height="200"
                            style="box-shadow: 0 3px 10px 1px rgba(0,0,0,.05); border-radius: 5px">
                        </svg>

                    </div>
                </div>

            </div>
            <div class="row justify-content-evenly m-5">

                <div class="col align-self-center">
                    <div class="card text-center">
                        <div class="card-header">Visualizations</div>
                        <div class="card-body">
                            <div class="row justify-content-evenly m-3">
                                <div class="col-4">
                                    <div class="card" style="width: 18rem">
                                        <div class="card-body">
                                          <h5 class="card-title">Map Chart</h5>
                                          <h6 class="card-subtitle mb-2 text-muted">17ucs107@lnmiit.ac.in</h6>
                                          <p class="card-text">
                                            Some quick example text to build on the  and make up the bulk of the
                                            card's content.
                                          </p>
                                          <a class="btn btn-primary" href="./index.html" role="button">Map Chart</a>
                                        </div>
                                      </div> 
                                </div>   
                                <div class="col-4">
                                    <div class="card" style="width: 18rem">
                                        <div class="card-body">
                                          <h5 class="card-title">Line Chart</h5>
                                          <h6 class="card-subtitle mb-2 text-muted">17ucs108@lnmiit.ac.in</h6>
                                          <p class="card-text">
                                            Some quick example text to build on the card title and make up the bulk of the
                                            card's content.
                                          </p>
                                          <a class="btn btn-primary" href="./inechat.html" role="button">Line Chart</a>
                                        </div>
                                      </div>
                                </div>   
                            </div>
                            <div class="row justify-content-evenly m-3">
                                <div class="col-4">
                                    <div class="card" style="width: 18rem">
                                        <div class="card-body">
                                          <h5 class="card-title">Multi Line chart</h5>
                                          <h6 class="card-subtitle mb-2 text-muted">17ucs107@lnmiit.ac.in</h6>
                                          <p class="card-text">
                                            Some quick example text to build on the  and make up the bulk of the
                                            card's content.
                                          </p>
                                          <a class="btn btn-primary" href="./mline.html" role="button">Multi Line Chart</a>
                                        </div>
                                      </div> 
                                </div>   
                                <div class="col-4">
                                    <div class="card" style="width: 18rem">
                                        <div class="card-body">
                                          <h5 class="card-title">Bar Chart 1</h5>
                                          <h6 class="card-subtitle mb-2 text-muted">Top 5 states</h6>
                                          <p class="card-text">
                                            Some quick example text to build on the card title and make up the bulk of the
                                            card's content.
                                          </p>
                                          <a class="btn btn-primary" href="./bar.html" role="button"> Chart</a>
                                        </div>
                                      </div>
                                </div>   
                                <div class="col-4">
                                    <div class="card" style="width: 18rem">
                                        <div class="card-body">
                                          <h5 class="card-title">Bar chart 2</h5>
                                          <h6 class="card-subtitle mb-2 text-muted">Bottom 5 States</h6>
                                          <p class="card-text">
                                            Some quick example text to build on the card title and make up the bulk of the
                                            card's content.
                                          </p>
                                          <a class="btn btn-primary" href="./smbar.html" role="button"> Chart</a>
                                        </div>
                                      </div>
                                </div>  
                            </div>
                            
                        </div>
                        
                    </div>
                </div>

            </div>
            <div class="row justify-content-evenly m-5">

                <div class="col align-self-center">
                    <div class="card text-center">
                        <div class="card-header">Team</div>
                        <div class="card-body">
                            <div class="row justify-content-evenly">
                                <div class="col-4">
                                    <div class="card" style="width: 18rem">
                                        <div class="card-body">
                                          <h5 class="card-title">Parth Patel</h5>
                                          <h6 class="card-subtitle mb-2 text-muted">17ucs107@lnmiit.ac.in</h6>
                                          <p class="card-text">
                                            Some quick example text to build on the  and make up the bulk of the
                                            card's content.
                                          </p>
                                          <a href="#" class="card-link">Card link</a>
                                          <a href="#" class="card-link">Another link</a>
                                        </div>
                                      </div> 
                                </div>   
                                <div class="col-4">
                                    <div class="card" style="width: 18rem">
                                        <div class="card-body">
                                          <h5 class="card-title">Pawan Jain</h5>
                                          <h6 class="card-subtitle mb-2 text-muted">17ucs108@lnmiit.ac.in</h6>
                                          <p class="card-text">
                                            Some quick example text to build on the card title and make up the bulk of the
                                            card's content.
                                          </p>
                                          <a href="#" class="card-link">Card link</a>
                                          <a href="#" class="card-link">Another link</a>
                                        </div>
                                      </div>
                                </div>   
                            </div>
                            
                        </div>
                        
                    </div>
                </div>

            </div>
        </div>
    </div>
    </header>
</body>
<script>const pointSet = [110, 60, 80, 50, 40]
    const barSet = [30, 50, 80, 60, 70];
    const pieSet = [.3, .25, .2, .1];
    const colors = ['tomato', 'lightcoral', 'salmon', 'lightsalmon', 'indianred']



    function easeOut(t) {
        return 1 - (--t) * t * t * t
    }

    function elasticOut({ a, n, b }) {
        return function (t) {
            const i = -Math.asin(-1 / a);
            return a * Math.pow(Math.E, -b * t) * Math.sin(n / (1 - i) * t - i) + 1;
        }
    }


    const spring = elasticOut({ a: 1, n: 13, b: 10 })




    //helper functions for cross product and rotation
    const svg = document.getElementById('svg');










    function multiply(a, b) {

        if (a[0].length !== b.length) throw new RangeError('dimensional mismatch')

        const ans = [];
        for (let i = 0; i < a.length; i++) ans[i] = [];

        for (let rowA = 0; rowA < a.length; rowA++) {
            for (let colB = 0; colB < b[0].length; colB++) {
                let val = 0;
                for (let i = 0; i < a[0].length; i++) {
                    val += a[rowA][i] * b[i][colB];
                }
                ans[rowA][colB] = val;
            }
        }

        return ans;
    }

    const rotationMx = theta => [
        [Math.cos(theta), Math.sin(theta)],
        [-Math.sin(theta), Math.cos(theta)]
    ];


    function rotate(p, theta) {
        const vec = [[p.x, p.y]];
        const r = rotationMx(theta);
        const result = multiply(vec, r)[0];

        return ({
            x: result[0],
            y: result[1]
        })
    }




    ////////////////////////////////////////////





    let i = 0;
    let pieCompletion = 0;

    //const paths = Array.from(document.getElementsByTagName('path'));

    const paths = [];
    const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
    g.setAttribute('transform', 'translate(200, 100)');
    svg.appendChild(g);

    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    circle.id = 'pieback'
    circle.setAttribute('fill', colors[4]);
    circle.setAttribute('stroke', '#fafafa');
    circle.setAttribute('stroke-width', 5);
    g.appendChild(circle);

    for (let i = 0; i < pieSet.length; i++) {
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('data-r', 0);
        path.setAttribute('data-rfin', 70);
        path.setAttribute('data-theta', 0);
        path.setAttribute('fill', colors[i]);
        path.setAttribute('data-max', pieSet[i]);
        path.setAttribute('stroke', '#fafafa');
        path.setAttribute('stroke-width', 5);
        path.setAttribute('stroke-linejoin', 'round');
        g.appendChild(path);
        paths.push(path);
    }



    const bars = [];
    for (let i = 0; i < barSet.length; i++) {
        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        rect.setAttribute('width', 20);
        rect.setAttribute('data-height', barSet[i]);
        rect.setAttribute('height', 0);
        rect.setAttribute('x', i * 25);
        rect.setAttribute('fill', colors[i]);
        svg.appendChild(rect);
        bars.push(rect);
    }











    const points = [];
    for (let i = 0; i < pointSet.length; i++) {
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('cx', i * 25 + 10);
        circle.setAttribute('cy', pointSet[i]);
        circle.setAttribute('r', 0);
        circle.setAttribute('fill', '#ddd')

        circle.delay = i * 10;
        circle._rfin = 5;

        svg.appendChild(circle);
        points.push(circle);
    }

    const lines = [];
    for (let i = 0; i < pointSet.length - 1; i++) {
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('y1', pointSet[i]);
        line.setAttribute('y2', pointSet[i]);
        line.setAttribute('x1', i * 25 + 10);
        line.setAttribute('x2', i * 25 + 10);
        line.setAttribute('stroke', '#ddd');
        line.setAttribute('stroke-width', "2");

        line._y1 = pointSet[i];
        line._y2 = pointSet[i + 1];
        line._x1 = i * 25 + 10;
        line._x2 = (i + 1) * 25 + 10;
        line.delay = i * 10;

        lines.push(line);

        svg.appendChild(line);
    }



    bars.forEach((bar, i) => {

        bar.delay = i * 10;
    });
















    function animate() {
        bars.forEach(bar => {
            if (i < bar.delay) return;
            if (i - bar.delay > 80) return;
            const completion = spring((i - bar.delay) / 80);
            bar.setAttribute('height', bar.dataset.height * completion);
            bar.setAttribute('y', 195 - bar.dataset.height * completion);
        })


        points.forEach(circle => {
            if (i < circle.delay) return;

            const time = i - circle.delay;
            if (time < 100) completion = easeOut(time / 100);

            circle.setAttribute('r', circle._rfin * completion);
        }
        )



        lines.forEach(line => {
            if (!line._x) line._x = line._x1;
            if (!line._y) line._y = line._y1;


            if (+line._x >= +line._x2) return;
            if (i < line.delay) return;

            line._y = +line._y + (line._y2 - line._y1) * .05;
            line._x = +line._x + (line._x2 - line._x1) * .05;

            line.setAttribute('x2', line._x);
            line.setAttribute('y2', line._y);
        })






        if (i <= 100) pieCompletion = easeOut(i / 100);

        paths.forEach((path, j) => {


            path.dataset.theta = pieCompletion * path.dataset.max * Math.PI * 2;


            const t0 = paths.slice(0, j).reduce((a, l) => a + +l.dataset.theta, 0);

            const p1 = rotate({ x: 0, y: -pieCompletion * path.dataset.rfin }, t0);
            const p2 = rotate({ x: 0, y: -pieCompletion * path.dataset.rfin }, +path.dataset.theta + t0);
            path.setAttribute('d', `
              M ${p1.x} ${p1.y} 
              A ${pieCompletion * path.dataset.rfin} ${pieCompletion * path.dataset.rfin} 
              0 ${(path.dataset.theta) % (2 * Math.PI) < Math.PI ? 0 : 1} 1 
              ${p2.x} ${p2.y} L 0 0 L ${p1.x} ${p1.y}`
            );


        })

        document.getElementById('pieback').setAttribute('r', 70 * pieCompletion);



        i++;
        requestAnimationFrame(animate);
    }

    setTimeout(() => requestAnimationFrame(animate), 1000)</script>

</html>